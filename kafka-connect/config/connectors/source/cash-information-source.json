{
  "name": "db2-cash-information-source",
  "config": {
    "connector.class": "io.confluent.connect.jdbc.JdbcSourceConnector",
    "tasks.max": "1",
    "connection.url": "jdbc:db2://172.10.2.42:50000/mcbecho:currentSchema=PROFITS;",
    "connection.user": "profits",
    "connection.password": "prft2016",
    "driver.class": "com.ibm.db2.jcc.DB2Driver",
    "mode": "bulk",  
    "poll.interval.ms": "5000",
    "batch.max.rows": "2000",
    "validate.non.null": "false",
    "query": "SELECT CURRENT_TIMESTAMP(6) AS REPORTINGDATE,gte.FK_UNITCODETRXUNIT AS BRANCHCODE,CASE WHEN gl.EXTERNAL_GLACCOUNT='101000001' THEN 'Cash in vault' WHEN gl.EXTERNAL_GLACCOUNT='101000002' THEN 'Petty cash' WHEN gl.EXTERNAL_GLACCOUNT IN ('101000010','101000015') THEN 'Cash in ATMs' WHEN gl.EXTERNAL_GLACCOUNT IN ('101000004','101000011') THEN 'Cash in Teller' ELSE 'Other cash' END AS CASHCATEGORY,gte.CURRENCY_SHORT_DES AS CURRENCY,gte.DC_AMOUNT AS amountLocal,CASE WHEN gte.CURRENCY_SHORT_DES='USD' THEN gte.DC_AMOUNT ELSE NULL END AS USDAMOUNT,CASE WHEN gte.CURRENCY_SHORT_DES='USD' THEN gte.DC_AMOUNT*2500 ELSE gte.DC_AMOUNT END AS TZSAMOUNT,gte.TRN_DATE AS TRANSACTIONDATE,gte.AVAILABILITY_DATE AS MATURITYDATE,CAST(0 AS DECIMAL(18,2)) AS ALLOWANCEpROBABLELOSS,CAST(0 AS DECIMAL(18,2)) AS BOTPROVISSION FROM GLI_TRX_EXTRACT gte JOIN GLG_ACCOUNT gl ON gte.FK_GLG_ACCOUNTACCO=gl.ACCOUNT_ID WHERE gl.EXTERNAL_GLACCOUNT IN ('101000001','101000002','101000004','101000007','101000010','101000015','101000011') ORDER BY gte.TRN_DATE",
    "topic.prefix": "bank.db2.",
    "value.converter.schema.registry.url": "http://schema-registry:8081",
    "transforms": "createKey,setSchema",
    "transforms.createKey.type": "org.apache.kafka.connect.transforms.ValueToKey",
    "transforms.createKey.fields": "BRANCHCODE,TRANSACTIONDATE",
    "transforms.setSchema.type": "org.apache.kafka.connect.transforms.SetSchemaMetadata$Value",
    "transforms.setSchema.schema.name": "bank.cash_information_v1",
    "errors.tolerance": "all",
    "errors.deadletterqueue.topic.name": "bank.db2.dlq",
    "errors.log.enable": "true",
    "errors.log.include.messages": "true"
  }
}